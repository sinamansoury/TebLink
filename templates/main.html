{% extends 'layout.html' %}
{% load static %}

{% block title %}TebLink{% endblock %}
{% block content %}
    <!-- Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ -->
    <div class="max-w-6xl w-full">
        <h1 class="text-4xl font-extrabold text-blue-600 text-center mb-8"></h1>
        <div class="flex justify-center items-center bg-white shadow-md rounded-lg w-full max-w-3xl mx-auto">
            <input type="text" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾Ø²Ø´Ú©ØŒ ØªØ®ØµØµ ÛŒØ§ Ú©Ù„ÛŒÙ†ÛŒÚ©..."
                   class="w-full py-2 px-3 rounded-md outline-none text-gray-700">
            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 ml-3">
                Ø¬Ø³ØªØ¬Ùˆ ğŸ”
            </button>
        </div>

        <h1 class="text-4xl font-extrabold text-blue-600 text-center mb-8"></h1>
        <div id="specialities" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
    </div>

    <script >
    const API_BASE_URL = "https://teblink.onrender.com/api/consultant/";

async function fetchSpecialities() {
    try {
        const response = await fetch(API_BASE_URL);
        const data = await response.json(); // Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² API
        $('#specialities').empty(); // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‚Ø¨Ù„ÛŒ

        data.forEach(consultant => {
            // Ù„ÛŒÙ†Ú© Ø¨Ù‡ ØµÙØ­Ù‡ Ø¯Ú©ØªØ±Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ØªØ®ØµØµ
            const specialityLink = `/doctor/${consultant.consultant}`;
            $('#specialities').append(`
                <a href="${specialityLink}" class="block speciality-link" data-link="${specialityLink}">
                    <div class="bg-white p-5 rounded-xl shadow-md border border-gray-200 hover:shadow-lg transition duration-300 transform hover:-translate-y-1">
                        <p class="text-blue-600 text-lg font-semibold text-center">ğŸ”¬ ${consultant.consultant}</p>
                        <p class="text-gray-500 text-sm text-center mt-1">ğŸ‘¨â€âš•ï¸ ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø²Ø´Ú©Ø§Ù†: <span class="font-bold">${consultant.count}</span></p>
                    </div>
                </a>
            `);
        });
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ú©Ù„ÛŒÚ© Ø¨Ù‡ Ù‡Ø± Ù„ÛŒÙ†Ú©
        $('.speciality-link').on('click', function () {
            const specialityName = $(this).data('link').split('/').pop();  // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù†Ø§Ù… ØªØ®ØµØµ Ø§Ø² Ù„ÛŒÙ†Ú©
            fetchDoctorsBySpeciality(specialityName); // ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ú©ØªØ±Ù‡Ø§
        });

    } catch (error) {
        console.error("Error fetching specialities:", error);
    }
}

$(document).ready(fetchSpecialities);
    </script>
{% endblock %}
        
    


